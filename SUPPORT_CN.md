# 支持文档

[English](./SUPPORT.md)

## 目录

- [获取帮助](#获取帮助)
- [常见问题](#常见问题)
- [常见问题解答 (FAQ)](#常见问题解答-faq)
- [故障排除](#故障排除)
- [报告错误](#报告错误)
- [功能请求](#功能请求)
- [贡献](#贡献)
- [联系信息](#联系信息)

## 获取帮助

如果您需要 GNad.Fun 的帮助，以下是获取支持的最佳方式：

1. **文档**: 查看 [README.md](./README.md) 获取详细文档
2. **问题**: 在 GitHub 上搜索现有问题，看看您的问题是否已被解答
3. **新建问题**: 如果找不到答案，请创建新问题
4. **讨论**: 使用 GitHub Discussions 进行一般性问题和社区帮助

## 常见问题

### 合约部署问题

**问题**: 合约部署或初始化失败

**解决方案**:
- 确保您有足够的 gas 进行部署
- 检查是否提供了所有必需的参数
- 验证工厂合约在使用前已初始化
- 确保正确的合约权限和所有权

### 交易失败

**问题**: 交易因错误消息而回滚

**常见原因**:
- 余额不足（WMon 或代币）
- 滑点保护触发
- 截止时间已过期
- 代币支出授权不足
- 合约已锁定（债券曲线）

**解决方案**:
- 交易前检查您的 WMon 余额
- 如果使用保护功能，增加滑点容忍度
- 使用未来的截止时间（block.timestamp + X）
- 在卖出操作前授权代币
- 等待债券曲线解锁或检查锁定状态

### 费用计算错误

**问题**: 费用验证失败

**解决方案**:
- 验证费用金额是否与债券曲线配置匹配
- 检查费用分母和分子值
- 确保费用计算正确：`fee >= (amount * denominator) / numerator`

### Permit/授权问题

**问题**: Permit 或授权失败

**解决方案**:
- 验证签名参数（v, r, s）是否正确
- 检查截止时间是否已过期
- 确保域分隔符与合约匹配
- 验证 nonce 是否正确

## 常见问题解答 (FAQ)

### 一般问题

**问：什么是 WMon？**
答：WMon 是原生 Monad 代币的包装版本，为交易操作提供 ERC20 兼容性。

**问：债券曲线如何工作？**
答：债券曲线使用恒定乘积公式（k = x * y）来确定价格。购买更多代币时，价格上涨。虚拟储备用于初始价格计算。

**问：债券曲线锁定后会发生什么？**
答：当达到锁定代币目标时，债券曲线锁定并停止交易。然后可以在 DEX 上架该曲线。

**问：我可以创建多个代币吗？**
答：可以，每次调用 `createBc` 都会创建一个新的代币和债券曲线对。

**问：费用如何计算？**
答：费用根据债券曲线的费用配置（分母/分子）计算。买入时从输入金额中收取费用，卖出时从输出金额中收取。

### 交易问题

**问：`buy` 和 `protectBuy` 有什么区别？**
答：`buy` 立即按当前价格执行。`protectBuy` 包括滑点保护，如果价格移动超过 `amountOutMin` 则回滚。

**问：卖出前需要授权代币吗？**
答：是的，您需要：
- 使用 `approve()` 函数授权代币，或
- 使用基于 permit 的函数（`sellPermit`、`protectSellPermit` 等）

**问：什么是截止时间参数？**
答：截止时间确保交易新鲜度。它必须是未来的时间戳（block.timestamp + 持续时间）。过期截止时间的交易将回滚。

**问：我可以购买精确数量的代币吗？**
答：可以，使用 `exactOutBuy` 指定您想要接收的确切代币数量。

**问：我可以卖出换取精确数量的 WMon 吗？**
答：可以，使用 `exactOutSell` 指定您想要接收的确切 WMon 数量。

### 技术问题

**问：使用什么 Solidity 版本？**
答：合约使用 Solidity ^0.8.13 编写

**问：使用什么测试框架？**
答：使用 Foundry 进行测试。有关测试信息，请参阅 [test/README.md](./test/README.md)。

**问：虚拟储备与真实储备有何不同？**
答：虚拟储备用于初始价格计算，不反映实际余额。真实储备跟踪债券曲线合约中的实际代币余额。

**问：DEX 上架期间会发生什么？**
答：调用 `listing()` 时，代币和 WMon 被转移到兼容 Uniswap V2 的交易对，提供流动性，并销毁 LP 代币。

## 故障排除

### 测试失败

如果测试失败：

1. **检查 Foundry 版本**: 确保使用兼容的 Foundry 版本
   ```bash
   forge --version
   ```

2. **更新依赖**: 拉取最新依赖
   ```bash
   forge update
   ```

3. **清理构建**: 清理并重建
   ```bash
   forge clean
   forge build
   ```

4. **运行特定测试**: 隔离失败的测试
   ```bash
   forge test --match-test testName
   ```

5. **详细输出**: 获取更多信息
   ```bash
   forge test -vvv
   ```

### 编译错误

如果合约无法编译：

1. **检查 Solidity 版本**: 确保版本匹配（^0.8.13）
2. **验证导入**: 检查所有导入路径是否正确
3. **安装依赖**: 确保所有依赖都已安装
   ```bash
   forge install
   ```
4. **检查重映射**: 验证 `remappings.txt` 是否正确

### 运行时错误

如果交易在运行时失败：

1. **读取错误消息**: 错误消息旨在具有描述性
2. **检查事件日志**: 事件可以提供额外上下文
3. **验证状态**: 确保合约处于预期状态
4. **检查权限**: 验证调用者是否具有所需权限
5. **Gas 估算**: 确保提供足够的 gas

## 报告错误

报告错误时，请包括：

1. **描述**: 问题的清晰描述
2. **重现步骤**: 重现错误的详细步骤
3. **预期行为**: 应该发生什么
4. **实际行为**: 实际发生了什么
5. **环境**:
   - Solidity 版本
   - Foundry 版本（如适用）
   - 网络（如适用）
6. **错误消息**: 完整的错误消息或日志
7. **代码示例**: 重现的最小代码（如适用）
8. **截图**: 如果是视觉问题（如适用）

### 错误报告模板

```markdown
## 错误描述
错误的简要描述

## 重现步骤
1. 第一步
2. 第二步
3. 第三步

## 预期行为
应该发生什么

## 实际行为
实际发生了什么

## 环境
- Solidity 版本: 
- Foundry 版本: 
- 网络: 

## 错误消息
在此处粘贴错误消息

## 其他上下文
任何其他上下文或信息
```

## 功能请求

我们欢迎功能请求！提交时：

1. **清晰描述**: 清楚描述功能
2. **用例**: 解释为什么此功能有用
3. **潜在实现**: 如果您有想法，请分享
4. **替代方案**: 讨论您考虑过的任何替代方案

## 贡献

欢迎贡献！请：

1. Fork 仓库
2. 创建功能分支
3. 进行更改
4. 为新功能添加测试
5. 确保所有测试通过
6. 提交拉取请求

更多详情，请参阅贡献指南（如果可用）。

## 联系信息

- [Whatsapp](https://wa.me/16286666724?text=Hello%20there)
- [Telegram](https://t.me/angel001000010100)
- [Discord](https://discordapp.com/users/1114372741672488990)
- [Email](mailto:10xAngel.dev@gmail.com?subject=Hello%20Angel&body=Hi%20Angel%2C%20I%20found%20you%20on%20GitHub!)

## 其他资源

- [README.md](./README.md) - 主要文档
- [README_CN.md](./README_CN.md) - 中文文档
- [test/README.md](./test/README.md) - 测试文档
- [GitHub 仓库](https://github.com/angel10x/Gnad.fun-SmartContract) - 源代码

---

**注意**: 对于安全漏洞，请使用负责任的披露方式，私下联系维护者，而不是打开公开问题。

